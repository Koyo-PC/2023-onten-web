THREE.DeviceOrientationControls=function(b){var c=this;this.object=b;this.object.rotation.reorder("YXZ");this.enabled=true;this.deviceOrientation={};this.screenOrientation=0;this.alpha=0;this.alphaOffsetAngle=0;var a=function(f){c.deviceOrientation=f};var e=function(){c.screenOrientation=window.orientation||0};var d=function(){var h=new THREE.Vector3(0,0,1);var i=new THREE.Euler();var g=new THREE.Quaternion();var f=new THREE.Quaternion(-Math.sqrt(0.5),0,0,Math.sqrt(0.5));return function(n,m,l,j,k){i.set(l,m,-j,"YXZ");n.setFromEuler(i);n.multiply(f);n.multiply(g.setFromAxisAngle(h,-k))}}();this.connect=function(){e();window.addEventListener("orientationchange",e,false);window.addEventListener("deviceorientation",a,false);c.enabled=true};this.disconnect=function(){window.removeEventListener("orientationchange",e,false);window.removeEventListener("deviceorientation",a,false);c.enabled=false};this.update=function(){if(c.enabled===false){return}var i=c.deviceOrientation.alpha?THREE.Math.degToRad(c.deviceOrientation.alpha)+this.alphaOffsetAngle:0;var h=c.deviceOrientation.beta?THREE.Math.degToRad(c.deviceOrientation.beta):0;var f=c.deviceOrientation.gamma?THREE.Math.degToRad(c.deviceOrientation.gamma):0;var g=c.screenOrientation?THREE.Math.degToRad(c.screenOrientation):0;d(c.object.quaternion,i,h,f,g);this.alpha=i};this.updateAlphaOffsetAngle=function(f){this.alphaOffsetAngle=f;this.update()};this.dispose=function(){this.disconnect()};this.connect()};